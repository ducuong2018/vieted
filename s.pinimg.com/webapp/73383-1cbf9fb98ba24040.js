"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[73383],{473383:function(e,t,a){a.r(t),a.d(t,{VideoWrapper:function(){return B},default:function(){return W},getPlaylistSourceSrc:function(){return N}});var r=a(658379),o=a(249444),n=a(969327),i=a(282802),l=a(634004),s=a(931696),c=a(886365),u=a(388011),d=a(245410),p=a(802071),y=a(499992),f=a(505204),m=a(389282),v=["view","viewParameter","component","element","objectId"];function b(e,t){if(null==e)return{};var a,r,o=function(e,t){if(null==e)return{};var a,r,o={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){E(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=T(e);if(t){var o=T(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return function(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}(this,a)}}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function R(e,t){if(!e||void 0===e)return"undefined";if("string"==typeof e){var a=e;if(t){var r="control"===t?"v3.pinimg.com":"v2.pinimg.com";a=e.replace("v1.pinimg.com",r)}return a}if(Array.isArray(e)&&e[0].src){var o=e[0].src;if(t){var n="control"===t?"v3.pinimg.com":"v2.pinimg.com";o=o.replace("v1.pinimg.com",n)}return o}return"unsupported_type_".concat(O(e))}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,e);var t,a,r,n=k(i);function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return E(D(e=n.call.apply(n,[this].concat(a))),"state",{canPlayVideo:!1,playbackState:f.Cy.DEFAULT,videoStartTime:e.props.seekTime?e.props.seekTime:e.props.videoStartTime||0}),E(D(e),"errorRetryCount",2),E(D(e),"hasSegmentStarted",!1),E(D(e),"hasPlaybackStarted",!1),E(D(e),"hasVideoSessionStarted",!1),E(D(e),"hasVideoSessionEnded",!1),E(D(e),"lastStallTime",null),E(D(e),"lastPauseTime",null),E(D(e),"logSessionStartOnNextPlay",!1),E(D(e),"playerId",""),E(D(e),"videoSessionId",""),E(D(e),"videoVisibleTime",null),E(D(e),"playbackPerformance",{canPlayTime:null,detailedErrors:"",errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:R(e.props.src,e.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0}),E(D(e),"componentDidMount",(function(){var t=e.props,a=t.contextLogData,r=void 0===a?{}:a,o=t.playing,n=r.is_closeup_video,i=void 0!==n&&n;(0,y.tE)("videoMounted",!1,i),o&&(e.videoVisibleTime=new Date,e.logPlaybackPerformance(f.DR,{initiator:"mount"}))})),E(D(e),"componentDidUpdate",(function(t){var a=e.props,r=a.playing,o=a.visible,n=a.appInFocus,i=a.seekTime;i&&i!==t.seekTime&&e.setState({videoStartTime:i}),t.appInFocus&&!n&&(e.logPlaybackPerformance(f.$f,{initiator:"update"}),e.logSessionStartOnNextPlay=!0),t.visible&&!1===o&&(e.logSessionStartOnNextPlay=!1,e.updatePauseDuration(),e.logPlaybackPerformance(f.$f,{initiator:"update"})),!1===t.visible&&!0===o&&(e.videoVisibleTime=e.videoVisibleTime||new Date,r?(e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.logPlaybackPerformance(f.DR,{initiator:"update"})):e.logSessionStartOnNextPlay=!0),r&&n&&e.logSessionStartOnNextPlay&&(e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.logPlaybackPerformance(f.DR,{initiator:"update"}),e.logSessionStartOnNextPlay=!1)})),E(D(e),"addSegment",(function(){var t=e.playbackPerformance,a=t.canPlayTime,r=t.loadStartTime,o=t.segments,n=t.srcString,i=-1;a&&r&&0===o.length&&(i=a>r?a-r:0);var l=e.videoPlayerRef&&e.videoPlayerRef.video,s={indicatedKbps:-1,duration:l&&l.duration*f.gJ||-1,lastStartPlayTime:null,level:-1,numServerAddressChange:-1,observedKbps:-1,playbackStartDate:null,serverAddress:"",sourceWidth:-1,sourceHeight:-1,startupTimeMs:i,switchBitrateKbps:-1,uri:n,viewportWidth:l&&l.clientWidth||-1,viewportHeight:l&&l.clientHeight||-1,watchedDurationMs:0};o.push(s)})),E(D(e),"getCurrentVideoTime",(function(){return e.videoPlayerRef&&e.videoPlayerRef.video?e.videoPlayerRef.video.currentTime*f.gJ:0})),E(D(e),"getVideoResourceTiming",(function(){var t,a;if(null!==(t=window)&&void 0!==t&&null!==(a=t.performance)&&void 0!==a&&a.getEntriesByName&&e.playbackPerformance.srcString){var r=window.performance.getEntriesByName(e.playbackPerformance.srcString);return r.length>0&&r[0]||null}return null})),E(D(e),"handleCanPlayVideo",(function(t){var a=e.props,r=a.contextLogData,o=void 0===r?{}:r,n=a.onReady,i=a.playing,l=o.is_closeup_video,s=void 0!==l&&l,c=e.state.canPlayVideo;(0,y.tE)("handleCanPlayVideo",!1,s,{firstCanPlayEvent:!c,playing:i}),e.playbackPerformance.hasFatalError=!1,c||(e.playbackPerformance.canPlayTime=new Date),e.setState({canPlayVideo:!0}),n&&n(t)})),E(D(e),"handleEnded",(function(t){var a=e.props,r=a.loop,o=a.onEnded,n=e.playbackPerformance.segments,i=n&&n[n.length-1];r&&e.videoPlayerRef&&e.videoPlayerRef.video?(e.updateWatchDurationForCurrentSegment(),i&&(i.lastStartPlayTime=0),e.hasSegmentStarted=!1):r||e.logPlaybackPerformance(f.$f,{initiator:"videoEnded",loop:r}),e.setState({playbackState:f.Cy.ENDED}),o&&o(t)})),E(D(e),"handleError",(function(){var t,a,r,o,n,i,l,s,c=e.props.contextLogData,u=(void 0===c?{}:c).is_closeup_video,d=void 0!==u&&u,p=e.videoPlayerRef&&e.videoPlayerRef.video;(null==p||null===(t=p.error)||void 0===t?void 0:t.code)!==f.lG.MEDIA_ERR_ABORTED&&(e.playbackPerformance.hasFatalError=!0),e.playbackPerformance.detailedErrors+="".concat(e.playbackPerformance.detailedErrors.length>0?", ":"").concat((null==p||null===(a=p.error)||void 0===a?void 0:a.message)||""),e.playbackPerformance.errorCode=(null==p||null===(r=p.error)||void 0===r?void 0:r.code)||0,e.playbackPerformance.errorName=(null==p||null===(o=p.error)||void 0===o||null===(n=o.message)||void 0===n?void 0:n.slice(0,100))||"unknown",e.playbackPerformance.errorReason=(null==p||null===(i=p.error)||void 0===i||null===(l=i.message)||void 0===l?void 0:l.slice(0,100))||"unknown";var m={errorName:e.playbackPerformance.errorCode,errorReason:e.playbackPerformance.errorName,errorRetryCount:e.errorRetryCount,playbackState:e.state.playbackState,networkState:(null==p?void 0:p.networkState)||"unknown"};switch((0,y.tE)("fatalError",!1,d,m),null==p||null===(s=p.error)||void 0===s?void 0:s.code){case f.lG.MEDIA_ERR_ABORTED:break;case f.lG.MEDIA_ERR_NETWORK:case f.lG.MEDIA_ERR_DECODE:case f.lG.MEDIA_ERR_SRC_NOT_SUPPORTED:default:e.errorRetryCount>0&&(null==p||p.load(),e.errorRetryCount-=1)}e.updateWatchDurationForCurrentSegment(),e.setState({playbackState:f.Cy.FAILED})})),E(D(e),"handleLoadedMetadata",(function(){e.setState({playbackState:f.Cy.LOADED_METADATA})})),E(D(e),"handleLoadStart",(function(){e.playbackPerformance.loadStartTime=new Date,e.setState({playbackState:f.Cy.LOAD_START})})),E(D(e),"handleLoadedData",(function(){e.setState({playbackState:f.Cy.LOADED_DATA})})),E(D(e),"handlePlaying",(function(){e.playbackPerformance.hasFatalError=!1,e.setPlaybackStartTime(),e.hasSegmentStarted||e.addSegment(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.updateStallDuration(),e.updatePauseDuration(),e.setState({playbackState:f.Cy.PLAYING}),e.props.clearSeekTime&&e.props.clearSeekTime()})),E(D(e),"handleUserPause",(function(t){var a=e.props.onControlsPause;e.lastPauseTime=new Date,a&&a(t)})),E(D(e),"handleVideoPause",(function(){e.state.playbackState!==f.Cy.STALLING&&e.state.playbackState!==f.Cy.SEEKING&&(e.updateWatchDurationForCurrentSegment(),e.lastPauseTime||e.updateStallDuration()),e.setState({playbackState:f.Cy.PAUSED})})),E(D(e),"handleSeeking",(function(){e.playbackPerformance.numberOfSeeks+=1;var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&(a.lastStartPlayTime=null),e.state.playbackState!==f.Cy.ENDED&&e.setState({playbackState:f.Cy.SEEKING})})),E(D(e),"handleStalled",(function(){null===e.lastStallTime&&e.state.playbackState!==f.Cy.ENDED&&(e.lastStallTime=new Date,e.playbackPerformance.numberOfStalls+=1,e.setState({playbackState:f.Cy.STALLING}))})),E(D(e),"handleTimeUpdate",(function(t){var a=e.props.onTimeChange;a&&a(t),e.state.playbackState===f.Cy.PLAYING&&(e.updateWatchDurationForCurrentSegment(),e.setLastSegmentStartPlayTime())})),E(D(e),"resetPlaybackMetrics",(function(){e.hasSegmentStarted=!0,e.hasPlaybackStarted=!1,e.hasVideoSessionStarted=!1,e.hasVideoSessionEnded=!0,e.lastStallTime=null,e.lastPauseTime=null,e.videoSessionId="",e.videoVisibleTime=null,e.logSessionStartOnNextPlay=!1;var t=P(P({},e.playbackPerformance.segments[e.playbackPerformance.segments.length-1]),{},{lastStartPlayTime:null,playbackStartDate:null,watchedDurationMs:0});e.playbackPerformance.detailedErrors="",e.playbackPerformance.errorCode=0,e.playbackPerformance.errorName="",e.playbackPerformance.errorReason="",e.playbackPerformance.hasFatalError=!1,e.playbackPerformance.numberOfStalls=0,e.playbackPerformance.numberOfSeeks=0,e.playbackPerformance.playbackStartTimestamp=null,e.playbackPerformance.totalStallDurationMs=0,e.playbackPerformance.segments=[t]})),E(D(e),"setLastSegmentStartPlayTime",(function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&null===a.lastStartPlayTime&&(a.lastStartPlayTime=e.getCurrentVideoTime())})),E(D(e),"setLastSegmentPlaybackStartDate",(function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&null===a.playbackStartDate&&(a.playbackStartDate=Date.now())})),E(D(e),"setPlaybackStartTime",(function(){e.hasPlaybackStarted||(e.playbackPerformance.playbackStartTimestamp=Date.now(),e.hasPlaybackStarted=!0)})),E(D(e),"setVideoPlayerRef",(function(t){var a=e.props.setVideoRef;if(t&&(a&&a(t),e.videoPlayerRef=t,e.videoPlayerRef.video)){var r=e.videoPlayerRef.video;r.addEventListener("loadedmetadata",e.handleLoadedMetadata),r.addEventListener("loadeddata",e.handleLoadedData),r.addEventListener("pause",e.handleVideoPause),r.readyState>=3&&(e.setState({canPlayVideo:!0}),e.playbackPerformance.canPlayTime=new Date)}})),E(D(e),"updateStallDuration",(function(){if(null!==e.lastStallTime){var t=D(e).lastStallTime;e.playbackPerformance.totalStallDurationMs+=new Date-t,e.lastStallTime=null}})),E(D(e),"updatePauseDuration",(function(){if(null!==e.lastPauseTime){var t=D(e).lastPauseTime;e.playbackPerformance.totalPauseDurationMs+=new Date-t,e.lastPauseTime=null}})),E(D(e),"updateWatchDurationForCurrentSegment",(function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1],r=a?a.lastStartPlayTime:null,o=e.getCurrentVideoTime();if(a&&null!==r&&"number"==typeof o&&"number"==typeof r){var n=o-r;n>0&&(a.watchedDurationMs+=n,a.lastStartPlayTime=null)}})),E(D(e),"logPlaybackPerformance",(function(t,a){var r=e.props,o=r.contextLogData,n=void 0===o?{}:o,i=r.userId,l=r.isAutoPlay,s=r.logContextEvent,c=r.preload,u=n.is_closeup_video,d=void 0!==u&&u,p=e.playbackPerformance,m=p.canPlayTime,S=p.detailedErrors,h=p.errorCode,g=p.errorName,k=p.errorReason,D=p.hasFatalError,T=p.loadStartTime,E=p.totalPauseDurationMs,O=p.totalStallDurationMs,R=p.numberOfStalls,C=p.numberOfSeeks,w=p.playbackStartTimestamp,_=p.segments,V=p.srcString,j=e.videoPlayerRef&&e.videoPlayerRef.video,L=t===f.DR,A=L&&!e.hasVideoSessionStarted,I=!L&&!e.hasVideoSessionEnded&&e.hasVideoSessionStarted;if(j&&(A||I)){var x,M=-1;m&&T&&(M=m>T?m-T:0);var F=-1;m&&e.videoVisibleTime&&(F=m>e.videoVisibleTime?m-e.videoVisibleTime:0),L&&(e.videoSessionId=(0,f.Y7)(i),e.playerId=e.playerId||(0,f.EB)());var N=e.getVideoResourceTiming(),B={averageVideoKbps:-1,autoplaying:l,detailedErrors:S,downloadedKiloBytes:"number"==typeof(null==N?void 0:N.decodedBodySize)&&N.decodedBodySize/f.Fm||0,errorCode:h,errorName:g,errorReason:k,fatalError:D,isCellular:!1,nativeVideoDurationMs:j.duration*f.gJ||-1,numberOfStalls:R,numberOfSeeks:C,overallPausedDurationMs:E,overallBufferDurationMs:O,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:e.videoSessionId,playbackStartTimestamp:w||-1,segments:[],sessionMark:t,screenPixelScale:null!==(x=window)&&void 0!==x&&x.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:j.clientWidth,startupPlayerHeight:j.clientHeight,startupTimeMs:M,startupLatencyMs:F,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:j.videoWidth,startupVariantHeight:j.videoHeight,videoUrl:V,wasVideoPreloaded:"auto"===c};if(!L){e.updateWatchDurationForCurrentSegment(),e.updateStallDuration();var W=_.reduce((function(e,t){return e+(t.watchedDurationMs||0)}),0);B.overallWatchedDurationMs=W,B.startupVariantWatchedDurationMs=W,B.segments=e.playbackPerformance.segments,0===W?(B.errorName="invalid_watch_duration",B.rebufferRate=-1):B.rebufferRate=O/W}(0,y.ZP)(B,!1,d,P({playbackState:e.state.playbackState},a)),s({event_type:3606,event_data:{videoPerformanceData:B},view_type:n.view,view_parameter:n.viewParameter,component:n.component,element:n.element,object_id_str:n.objectId,aux_data:P(P({},b(n,v)),{},{is_closeup_video:d,playback_session_id:e.videoSessionId})}),L?(e.hasVideoSessionStarted=!0,e.hasVideoSessionEnded=!1):e.resetPlaybackMetrics(),(0,y.tE)(L?"sessionStart":"sessionEnd",!1,d,P({playbackState:e.state.playbackState},a))}})),e}return t=i,(a=[{key:"componentWillUnmount",value:function(){var e=this.props.loop;this.updatePauseDuration(),this.logPlaybackPerformance(f.$f,{initiator:"unmount",loop:e})}},{key:"render",value:function(){var e=this.props,t=e.aspectRatio,a=e.captions,r=e.controls,n=e.loop,i=e.loopOverride,l=e.objectFit,s=e.onDurationChange,c=e.onFullscreenChange,u=e.onLoadedChange,d=e.onControlsPlay,p=e.onPlayheadDown,y=e.onPlayheadUp,f=e.onSeek,v=e.onVolumeChange,b=e.playbackRate,S=e.playing,P=e.playsInline,h=e.poster,g=e.preload,k=e.src,D=e.volume,T=this.state,E=T.canPlayVideo,O=T.videoStartTime;return(0,m.jsx)(o.nk,{autoplay:E&&S,aspectRatio:t,captions:a,controls:r,loop:void 0===i?n:i,objectFit:l,onDurationChange:s,onEnded:this.handleEnded,onError:this.handleError,onFullscreenChange:c,onLoadedChange:u,onLoadStart:this.handleLoadStart,onControlsPause:this.handleUserPause,onControlsPlay:d,onPlaying:this.handlePlaying,onPlayheadDown:p,onPlayheadUp:y,onReady:this.handleCanPlayVideo,onSeek:f,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:v,onWaiting:this.handleStalled,playbackRate:b,onPlay:function(){},onPlayError:function(){},playing:E&&S,playsInline:P,poster:h,preload:g,ref:this.setVideoPlayerRef,src:R(k,this.props.quicExpGroup),startTime:O||void 0,volume:D})}}])&&h(t.prototype,a),r&&h(t,r),i}(r.Component);var w=(0,r.memo)((function(e){var t=(0,u.v)().logContextEvent,a=(0,i.B)(),r=a.country,o=a.isAuthenticated,n=a.isBot,s=a.isSocialBot,f=a.unauthId,v=a.userAgent,b=v.browserName,S=v.browserVersion,h=v.isMobile,g=e.contextLogData,k=void 0===g?{}:g,D=k.is_closeup_video,T=void 0!==D&&D,E=k.view,O=k.viewParameter,R=(0,c.I)().appUI.appInFocus,w=(0,d.F)().checkExperiment,_=(0,l.RC)().clearSeekTime,V=null;o&&(V=w("web_video_quic").group.length?w("web_video_quic").group:null);var j=(0,p.Z)(),L={browserName:b,browserVersion:S,country:r,isAuthenticated:o,isBot:n,is_closeup_video:T,isMobile:h,isSocialBot:s,view:E,viewParameter:O};return(0,y.r$)(L),(0,m.jsx)(C,P(P({},e),{},{userId:j.id||f,appInFocus:R,quicExpGroup:V,logContextEvent:t,clearSeekTime:_}))}));function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(Object(a),!0).forEach((function(t){F(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function L(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},A(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=M(e);if(t){var o=M(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return function(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,a)}}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},M(e)}function F(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var N=function(e){if(Array.isArray(e)){var t=e.find((function(e){return"video/m3u8"===e.type}));return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0},B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(i,e);var t,a,r,o=I(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),F(x(t=o.call(this,e)),"componentDidUpdate",(function(e){var a;e.videoStartTime&&t.props.videoStartTime&&e.videoStartTime<t.props.videoStartTime&&null!==(a=t.videoPlayerRef)&&void 0!==a&&a.video&&(t.videoPlayerRef.video.currentTime=t.props.videoStartTime)})),F(x(t),"setVideoPlayerRef",(function(e){e&&(t.videoPlayerRef=e)})),F(x(t),"handleOnEnded",(function(e){var a=e.event,r=t.props,o=r.loop,n=r.onLoop,i=r.onEnded;i&&(i({event:a}),t.videoPlayerRef&&t.videoPlayerRef.video&&o&&(t.videoPlayerRef.video.play(),n&&n()))}));var a=N(e.src);return t.state={useHlsVideo:!e.preferMp4&&!(0,n.G6)(e.requestContext.userAgent.browserName)&&!!a},t}return t=i,(a=[{key:"render",value:function(){var e=this.props,t=e.aspectRatio,a=e.appInFocus,r=e.backgroundColor,o=e.captions,n=e.clearSeekTime,i=e.contextLogData,l=e.controls,c=e.hlsConfig,u=e.isAutoPlay,d=e.loop,p=e.objectFit,y=e.onDurationChange,f=e.onEnded,v=e.onFullscreenChange,b=e.onLoadedChange,S=e.onControlsPause,P=e.onControlsPlay,h=e.onPlayheadDown,g=e.onPlayheadUp,k=e.onReady,D=e.onSeek,T=e.onTimeChange,E=e.onVolumeChange,O=e.playbackRate,R=e.playing,C=e.playsInline,_=e.poster,V=e.preferMp4,L=e.preload,A=e.seekTime,I=e.src,x=e.videoStartTime,M=e.visible,F=e.volume,B=this.state.useHlsVideo,W=N(I),U=j(j({},c),{},{startPosition:x||-1}),G=!f&&d;return B&&W?(0,m.jsx)(s.Z,{aspectRatio:t,appInFocus:a,backgroundColor:r,captions:o,clearSeekTime:n,contextLogData:i,controls:l,hlsConfig:U,isAutoPlay:u,loop:d,loopOverride:G,objectFit:p,onDurationChange:y,onEnded:this.handleOnEnded,onFullscreenChange:v,onLoadedChange:b,onControlsPause:S,onControlsPlay:P,onPlayheadDown:h,onPlayheadUp:g,onReady:k,onSeek:D,onTimeChange:T,onVolumeChange:E,playbackRate:O,onPlay:function(){},onPlayError:function(){},playing:R,playsInline:C,poster:_,preload:L,seekTime:A,setVideoRef:this.setVideoPlayerRef,src:W,visible:M,volume:F}):(0,m.jsx)(w,{aspectRatio:t,captions:o,clearSeekTime:n,contextLogData:i,controls:l,isAutoPlay:u,loop:d,loopOverride:G,objectFit:p,onDurationChange:y,onEnded:this.handleOnEnded,onFullscreenChange:v,onLoadedChange:b,onControlsPause:S,onControlsPlay:P,onPlayheadDown:h,onPlayheadUp:g,onReady:k,onSeek:D,onTimeChange:T,onVolumeChange:E,playbackRate:O,onPlay:function(){},onPlayError:function(){},playing:R,playsInline:C,poster:_,preload:L,seekTime:A,setVideoRef:this.setVideoPlayerRef,src:V?I:W||I,videoStartTime:x,visible:M,volume:F})}}])&&L(t.prototype,a),r&&L(t,r),i}(r.PureComponent);function W(e){var t=(0,c.I)().appUI.appInFocus,a=(0,l.Hx)().seekTime,r=(0,l.RC)().clearSeekTime,o=(0,i.B)();return(0,m.jsx)(B,j(j({},e),{},{appInFocus:t,requestContext:o,clearSeekTime:r,seekTime:a}))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/73383-1cbf9fb98ba24040.js.map