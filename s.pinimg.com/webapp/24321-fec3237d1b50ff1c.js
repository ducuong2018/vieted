"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[24321],{532465:function(t,n){function e(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var i=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"onResumeListeners",[]),r(this,"onPauseListeners",[]),r(this,"inExp",!1),r(this,"windowInFocus",!0)}var n,i,a;return n=t,i=[{key:"setExperiment",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.inExp=t}},{key:"onSessionResume",value:function(t){return this.onResumeListeners.push(t),this}},{key:"onSessionPause",value:function(t){return this.onPauseListeners.push(t),this}},{key:"removeResumeListener",value:function(t){this.onResumeListeners.filter((function(n){return n!==t}))}},{key:"removePauseListener",value:function(t){this.onPauseListeners=this.onPauseListeners.filter((function(n){return n!==t}))}},{key:"getAppState",value:function(){return this.windowInFocus?0:void 0}}],i&&e(n.prototype,i),a&&e(n,a),t}(),a=new i,o=function(t){if(t.isHidden){var n=t.reason;a.windowInFocus=!1,a.onPauseListeners.forEach((function(t){return t(n)}))}else a.windowInFocus=!0,a.onResumeListeners.forEach((function(t){return t()}))};setTimeout((function(){window.addEventListener("beforeunload",(function(){return o({isHidden:!0,reason:"beforeunload"})})),window.addEventListener("focus",(function(){return o({isHidden:!1})})),window.addEventListener("blur",(function(){return o({isHidden:!0,reason:"blur"})})),window.addEventListener("pageshow",(function(){return o({isHidden:!1})})),window.addEventListener("pagehide",(function(){return o({isHidden:!0,reason:"pagehide"})})),void 0!==document.hidden?document.addEventListener("visibilitychange",(function(){return o(document.hidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})}),!1):void 0!==document.webkitHidden&&document.addEventListener("webkitvisibilitychange",(function(){return o(document.webkitHidden?{isHidden:!0,reason:"visibilitychange"}:{isHidden:!1})}),!1)}),0),n.Z=a},77494:function(t,n,e){e.d(n,{Z:function(){return gt}});var r=e(658379),i=e(532465),a=e(245410),o=e(93501),c=e(30482),s=e(763795),u=e(39983),l=e(677263),p=e(41162),d=e(372453),f=e(363959),m=e(324e3),y=e(583077);function g(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function v(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?g(Object(e),!0).forEach((function(n){b(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):g(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function b(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var h=function(t){var n=t.constraintMap,e=t.initialNavTiming;return v(v(v(v({},t.annotations),(0,y.jh)("constraint_",n)),(0,y.jh)("mark_",(0,u.gQ)())),(0,y.jh)("browser_",v(v({},e?(0,y.D3)(e):{}),(0,y.rX)())))},w=e(577491),T=e(335741),S=e(769916);function A(t){return function(t){if(Array.isArray(t))return O(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return O(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return O(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var E=function(t,n){var e=(0,T.v2)().firstInputDelay;return[].concat(A(t.map((function(t){return(0,w.Z)(t,n)})).filter(Boolean)),A(e?[{name:"fid",id:(0,S.Z)(),parentId:n,startTime:e.startTime,endTime:e.endTime,annotationMap:{},binaryAnnotationMap:{}}]:[]))},I=e(40660),_=e(813107);function P(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return C(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return C(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}var j=function(t){var n=t.eventPrefix,e=t.endTime,r=t.tags,i=t.resourceArr,a=t.resourceType,o=void 0===a?"allResources":a,c=i.length;if(c>0&&"object"===M(i[0])&&!Array.isArray(i[0])){for(var s=P(i).sort((function(t,n){return t.fetchStart-n.fetchStart})),u=P(i).sort((function(t,n){return t.responseEnd-n.responseEnd})),l=1,p=e/5,d=0;l<=5;){for(var f=0;d<=c-1&&s[d].fetchStart<=p*l;)d+=1,f+=1;I.Z.gauge("".concat(n,".tags.").concat(o,".fetchStartInterval").concat(l,"of5"),f,.2,r),I.Z.gauge("".concat(n,".").concat(o,".fetchStartInterval").concat(l,"of5"),f,.2),l+=1}var m={zeroPercentInFlight:s[0].fetchStart,twentyFivePercentInFlight:s[Math.floor(c/4)].fetchStart,fiftyPercentInFlight:s[2*Math.floor(c/4)].fetchStart,seventyFivePercentInFlight:s[3*Math.floor(c/4)].fetchStart,hundredPercentInFlight:s[c-1].fetchStart,twentyFivePercentComplete:u[Math.floor(c/4)].responseEnd,fiftyPercentComplete:u[2*Math.floor(c/4)].responseEnd,seventyFivePercentComplete:u[3*Math.floor(c/4)].responseEnd,hundredPercentComplete:u[c-1].responseEnd};for(var y in m)m[y]&&(I.Z.timing("".concat(n,".tags.").concat(o,".").concat(y),m[y],.2,r),I.Z.timing("".concat(n,".").concat(o,".").concat(y),m[y],.2))}},N=function(t){var n=t.annotateExperiments,e=t.endTime,r=t.entries,i=t.metricId,a=t.pwtStaticContext,o="".concat((0,_.Z)(a),".").concat(i.surface),c=[o];n&&n.forEach((function(t){var n=a.getExperimentGroup(t)||"null";c.push("".concat(o,".").concat(t,".").concat(n))}));var s,u={lcpTimingBucket:((s=(0,T.Bn)())<=2500?"Good":s>2500&&s<=4e3?"Needs Improvement":"Poor")||"unknown",isAuthenticated:a.isAuthenticated,navigationType:i.navigationType},l=Array.from(r.filter((function(t){return"number"==typeof t.encodedBodySize&&t.encodedBodySize>=1e4&&t.responseEnd<=e}))),p=[],d=[],f=[],m=[],y=[];l.forEach((function(t){"img"===t.initiatorType?p.push(t):"css"===t.initiatorType?d.push(t):"script"===t.initiatorType?f.push(t):"xmlhttprequest"===t.initiatorType?m.push(t):"link"===t.initiatorType&&t.name.includes("i.pinimg.com")&&y.push(t)})),c.forEach((function(t){j({eventPrefix:t,endTime:e,tags:u,resourceArr:l}),j({eventPrefix:t,endTime:e,tags:u,resourceArr:p,resourceType:"image"}),j({eventPrefix:t,endTime:e,tags:u,resourceArr:d,resourceType:"css"}),j({eventPrefix:t,endTime:e,tags:u,resourceArr:f,resourceType:"scripts"}),j({eventPrefix:t,endTime:e,tags:u,resourceArr:m,resourceType:"xhr"}),j({eventPrefix:t,endTime:e,tags:u,resourceArr:y,resourceType:"preloadedImage"})}))},R=e(353335),L=function(t){var n,e=t.annotateExperiments,r=t.annotations,i=t.binaryAnnotations,a=t.constraintMap,o=t.endTime,c=t.imageTimings,s=t.metricId,u=t.pwtStaticContext,l=t.startTime,p=t.traceId,y=t.spans,g=(0,R.Cg)();"initial_app_load"===s.navigationType&&(n=(0,f.Z)());var v=c.map((function(t){return t.name})),b=g.map((function(t){return(0,m.p)(t,v)})).filter((function(t){return!function(t,n){var e=t.startTime,r=t.responseEnd;return e>n.endTime||!!r&&r<n.startTime||e<n.startTime-100}(t.timing,{startTime:l,endTime:o})}));return"board"!==s.surface&&"pin_closeup"!==s.surface||N({annotateExperiments:e,endTime:o,entries:g,metricId:s,pwtStaticContext:u}),{type:"COMPLETE",traceId:p,startTime:l,endTime:o,spans:E(b,p).concat(y),annotationMap:h({constraintMap:a,initialNavTiming:n,annotations:r}),binaryAnnotationMap:(0,d.rA)({annotateExperiments:e,binaryAnnotations:i,entries:g,metricId:s,performanceResources:b,pwtEndTime:o,pwtStaticContext:u})}},x=!1,D=function(t,n){return t&&n?x?((0,s.H)("duplicated_initial_app_load_surface_pwt"),(0,S.Z)()):(x=!0,n):(0,S.Z)()},Z=e(591614),H=e(361905);function B(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return k(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return k(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function z(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function U(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var G=function(t){var n=performance.getEntriesByType("resource").filter((function(t){return t.name.includes("i.pinimg")})).reduce((function(t,n){var e=n.name.replace(".jpg","").split("/");return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?z(Object(e),!0).forEach((function(n){U(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):z(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}(U({},e[e.length-1],{downloadSize:n.name.split("/")[3].split("x")[0]}),t)}),{}),e=Array.from(document.getElementsByTagName("img")).map((function(t){var e=t.src.replace(".jpg","").split("/"),r=e[e.length-1];if(n[r]){var i,a=(null===(i=(0,H.rZ)(t))||void 0===i?void 0:i.width)||1,o=n[r].downloadSize;return{fileName:r,renderedSize:a,downloadedSize:o,ratio:o/a}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}})),r=Array.from(document.querySelectorAll('div[role="img"]')).map((function(t){var e=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),r=e[e.length-1];if(n[r]&&t instanceof HTMLDivElement){var i,a=(null===(i=(0,H.rZ)(t))||void 0===i?void 0:i.width)||1,o=n[r].downloadSize;return{fileName:r,renderedSize:a,downloadedSize:o,ratio:o/a}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}}));[].concat(B(e),B(r)).forEach((function(n){var e=n.ratio,r=n.fileName,i=n.downloadedSize;n.ratio>1.05&&(0,s.A9)("checkImageRatio.".concat(t),{count:Math.round(10*e)/10,tags:{fileName:"".concat(i,"_").concat(r)}})}))},F=e(622200),K=e(282802),V=function(t,n){var e=(0,r.useRef)(n);return{getState:function(){return e.current},dispatch:function(n){e.current=t(e.current,n)}}},J=e(694952),W=e(935340),Y=e(389282);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}var q=["children"];function X(t,n){if(null==t)return{};var e,r,i=function(t,n){if(null==t)return{};var e,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)e=a[r],n.indexOf(e)>=0||(i[e]=t[e]);return i}(t,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)e=a[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}function Q(t){var n=function(t,n){if("object"!==$(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!==$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"===$(n)?n:String(n)}function tt(t){return function(t){if(Array.isArray(t))return nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return nt(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return nt(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function et(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function rt(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?et(Object(e),!0).forEach((function(n){it(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):et(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function it(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var at=["initial_app_load","client_route_push"],ot=(0,c.XV)("PwtSurface"),ct="NavigationComplete",st="VisuallyComplete",ut=function(t,n){t.isSampled&&(0,Z.Z)({metricId:t.metricConfig.metricId,pwtStaticContext:t.metricConfig.pwtStaticContext,result:{type:"ABORT",reason:n}})},lt=function(t){if(t.metricConfig.constraints.every((function(n){return t.constraintMap[n]}))){var n=Math.max.apply(Math,tt(t.metricConfig.constraints.map((function(n){return t.constraintMap[n]}))));return function(t,n){var e,r=t.metricConfig,i=r.metricId,a=r.pwtStaticContext,c=r.annotateExperiments,l=t.annotations,p=t.binaryAnnotations,d=t.constraintMap,f=t.startTime,m=t.imageTimings,y=t.isSampled,g=t.spans;(0,u.L8)("PWT_Complete_".concat((0,o.KJ)(i)));var v=D("initial_app_load"===i.navigationType,null===(e=a.serverData)||void 0===e?void 0:e.trace_id),b=L({annotateExperiments:c,annotations:l,binaryAnnotations:p,constraintMap:d,endTime:n,imageTimings:m,metricId:i,pwtStaticContext:a,startTime:f,traceId:v,spans:g});y&&(0,Z.Z)({metricId:i,pwtStaticContext:a,result:b});try{G(String(b.binaryAnnotationMap["metricId.surface"].value))}catch(h){(0,s.H)("image_ratio_check_error",{error:h})}return rt(rt({},t),{},{result:b,status:"DONE"})}(t,n)}return t},pt=function(t,n){var e=n.constraint,r=n.time,i=(0,o.KJ)(t.metricConfig.metricId);return F.Z?t.metricConfig.constraints.find((function(t){return t===e}))?t.constraintMap[e]?(ot('constraint "'.concat(e,'" is already complete.')),(0,s.H)("duplicated_constraint_complete",{constraint:e,action:i}),t):(ot('marking constraint "'.concat(e,'" as complete')),(0,u.ZP)("constraint_".concat(e,"_is_complete")),lt(rt(rt({},t),{},{constraintMap:rt(rt({},t.constraintMap),{},it({},e,r||F.Z.now()))}))):(ot('marked constraint "'.concat(e,'" is not a required constraint.')),t):((0,s.H)("missing_window_performance",{action:i}),t)},dt=function(t,n){if(ot("dispatch action",n),"INIT_ROUTE"===n.type)return function(t,n){var e=n.metricConfig,r=n.startTime,i=n.isSampled;if("TIMING"===t.status&&r!==t.startTime&&ut(t,"routeUpdatedOnSameSurface"),!e)return{status:"DISABLED",metricConfig:null};var a,c,u,l,p=(0,o.KJ)(e.metricId);return"TIMING"===t.status&&t.startTime===r&&t.constraintMap[ct]?((0,s.H)("duplicated_init_route_action",{action:p}),t):("Other"===e.pwtStaticContext.browserName&&!1===e.metricId.isAuthenticated&&"initial_app_load"===e.metricId.navigationType?((0,s.A9)("TIMING.".concat(p),{tags:{userAgent:null===(a=window)||void 0===a||null===(c=a.navigator)||void 0===c?void 0:c.userAgent}}),(0,s.A9)("TIMING.sampled.".concat(p),{tags:{userAgent:null===(u=window)||void 0===u||null===(l=u.navigator)||void 0===l?void 0:l.userAgent},sampleRate:.5})):((0,s.A9)("TIMING.".concat(p)),(0,s.A9)("TIMING.sampled.".concat(p),{sampleRate:.5})),pt({status:"TIMING",metricConfig:e,startTime:r,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:i,spans:[]},{constraint:ct}))}(t,n.payload);if("TIMING"!==t.status)return ot("ignoring action due to invalid state ".concat(t.status),n),t;switch(n.type){case"ABORT":ut(t,n.reason);var e={type:"ABORT",reason:n.reason};return rt(rt({},t),{},{status:"DONE",result:e});case"ANNOTATE":var r=n.payload.name;if(!F.Z)return t;var i=F.Z.now();return ot("adding annotation {".concat(r,": ").concat(i,"}")),rt(rt({},t),{},{annotations:rt(rt({},t.annotations),it({},r,i))});case"BINARY_ANNOTATE":var a=n.payload,c=a.name,u=a.value,l=a.annotationType;return ot("adding binary annotation {".concat(c,": ").concat(u,"}")),rt(rt({},t),{},{binaryAnnotations:rt(rt({},t.binaryAnnotations),it({},c,{value:u,type:l}))});case"MARK_CONSTRAINT_COMPLETE":return pt(t,n.payload);case"REMOVE_CONSTRAINT":return function(t,n){if(!F.Z){var e=(0,o.KJ)(t.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:e})}ot('removing constraint "'.concat(n,'"'));var r=t.metricConfig.constraints.filter((function(t){return t!==n})),i=t.constraintMap,a=(i[n],X(i,[n].map(Q)));return lt(rt(rt({},t),{},{constraintMap:a,metricConfig:rt(rt({},t.metricConfig),{},{constraints:r})}))}(t,n.payload);case"SET_SEGMENT":return function(t,n){if(!F.Z){var e=(0,o.KJ)(t.metricConfig.metricId);(0,s.H)("missing_window_performance",{action:e})}ot('updating pwt segment to "'.concat(n,'"'));var r=rt(rt({},t.metricConfig.metricId),{},{segment:n});return rt(rt({},t),{},{metricConfig:rt(rt({},t.metricConfig),{},{metricId:r})})}(t,n.payload);case"SET_VISUALLY_COMPLETE_RESULT":var p=n.payload.imageTimings;if(0===p.length){ut(t,"visuallyComplete_noImages");return rt(rt({},t),{},{status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}})}var d=Math.max.apply(Math,tt(p.map((function(t){return t.responseEnd||0}))));return pt(rt(rt({},t),{},{imageTimings:p}),{constraint:st,time:d});case"ADD_SUBSPAN":var f=t.startTime,m=n.payload,y=m.name,g=m.startTime,v=m.endTime,b=m.annotations,h=m.binaryAnnotations,w=m.parentId;return rt(rt({},t),{},{spans:[].concat(tt(t.spans),[{name:y,id:(0,S.Z)(),startTime:g||f,endTime:v,annotationMap:rt({},b),binaryAnnotationMap:rt({},h),parentId:w}])});case"START_SUBSPAN":return rt(rt({},t),{},{spans:[].concat(tt(t.spans),[{name:n.payload.name,id:(0,S.Z)(),startTime:F.Z?F.Z.now():0,endTime:1/0,annotationMap:rt({},n.payload.annotations),binaryAnnotationMap:rt({},n.payload.binaryAnnotations),parentId:n.payload.parentId}])});case"STOP_SUBSPAN":var T=t.spans.findIndex((function(t){return t.name===n.payload.name}));return T>-1?(t.spans[T].endTime=F.Z?F.Z.now():0,n.payload.annotations&&(t.spans[T].annotationMap=rt(rt({},t.spans[T].annotationMap),n.payload.annotations)),n.payload.binaryAnnotations&&(t.spans[T].binaryAnnotationMap=rt(rt({},t.spans[T].binaryAnnotationMap),n.payload.binaryAnnotations))):(0,s.H)("invalid_subspan_stop_name",{name:n.payload.name}),t;default:var A=(0,o.KJ)(t.metricConfig.metricId);return(0,s.H)("invalid_pwt_surface_action",{action:A}),t}},ft=function(t){if(!t)return"initial_app_load";switch(t.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}},mt=function(t){var n=t.surface,e=t.constraints,o=t.segment,c=t.measureGridVisuallyComplete,s=t.annotateExperiments,u=t.customEnabledNavigationTypes,p=t.navigationInfo,d=p.clientNavigation,f=p.navigationType,m=t.sampleRate,y=(0,r.useRef)("NOT_SET"),g=(0,l.N5)(),v=V(dt,{status:"DISABLED",metricConfig:null}),b=v.getState,h=v.dispatch,w=(0,K.B)();if(y.current!==d&&(y.current=d,g)){var T=g.isAuthenticated,S=n&&f&&(u||at).includes(f)?{metricId:{type:"surface",surface:n,navigationType:f,isAuthenticated:T,segment:o},annotateExperiments:s,constraints:[ct].concat(tt(e||[]),tt(c?[st]:[])),pwtStaticContext:g}:null;h({type:"INIT_ROUTE",payload:{metricConfig:S,startTime:d?d.time:0,isSampled:!m||Math.random()<m}})}var A=(0,a.F)(),O=b();if((0,r.useEffect)((function(){var t=function(t){h({type:"ABORT",reason:t})};i.Z.onSessionPause(t);var n=window.innerHeight,e=window.innerWidth,r=function t(){var r,i,a,o=Math.abs(window.innerHeight-n),c=Math.abs(window.innerWidth-e),s=window.innerHeight!==n,u=window.innerWidth!==e,l={handler:(0,J.H)(),deviceType:null!==(r=null==g?void 0:g.deviceType)&&void 0!==r?r:"unknown",isAuthenticated:null!==(i=null==g?void 0:g.isAuthenticated)&&void 0!==i?i:"unknown",platform:null!==(a=w.userAgent.platform)&&void 0!==a?a:"unknown"};(0,W.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:rt(rt({},l),{},{heightChanged:s,widthChanged:u})}),s&&(0,W.S0)("webapp.PwtLogger.resizeHeightDelta",o,{sampleRate:1,tags:l}),u&&(0,W.S0)("webapp.PwtLogger.resizeWidthDelta",c,{sampleRate:1,tags:l}),window.removeEventListener("resize",t),("phone"===(null==g?void 0:g.deviceType)&&(!u&&s&&o<=150||!s&&!u)||"desktop"===(null==g?void 0:g.deviceType)&&!s&&!u)&&A.checkExperiment(w.isAuthenticated?"web_pwt_resize_abort_auth":"web_pwt_resize_abort_unauth").anyEnabled?(0,W.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:rt(rt({},l),{},{heightChanged:s,widthChanged:u})}):h({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",r),function(){var n=b();ot("handling unmount",n),"TIMING"===n.status&&ut(n,"unmount"),i.Z.removePauseListener(t),window.removeEventListener("resize",r)}}),[]),"TIMING"!==O.status||!O.constraintMap[ct])return{state:O,context:null};var E=O.startTime,I=O.metricConfig;return{state:O,context:{abort:function(t){return h({type:"ABORT",reason:t})},addAnnotation:function(t){return h({type:"ANNOTATE",payload:{name:t}})},addBinaryAnnotation:function(t,n,e){return h({type:"BINARY_ANNOTATE",payload:{name:t,value:n,annotationType:e}})},addSubspan:function(t,n,e){return h({type:"ADD_SUBSPAN",payload:{name:t,startTime:n,endTime:e,annotations:arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},binaryAnnotations:arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},parentId:arguments.length>5&&void 0!==arguments[5]?arguments[5]:null}})},getId:function(){return E},getMetricId:function(){return I.metricId},markConstraintComplete:function(t){return h({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:t,time:F.Z?F.Z.now():0}})},removeConstraint:function(t){return h({type:"REMOVE_CONSTRAINT",payload:t})},setSegment:function(t){return h({type:"SET_SEGMENT",payload:t})},setVisuallyCompleteResult:I.constraints.includes(st)?function(t){return h({type:"SET_VISUALLY_COMPLETE_RESULT",payload:t})}:null,startSubspan:function(t){return h({type:"START_SUBSPAN",payload:{name:t,annotations:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},binaryAnnotations:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},parentId:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null}})},stopSubspan:function(t){return h({type:"STOP_SUBSPAN",payload:{name:t,annotations:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},binaryAnnotations:arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},parentId:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null}})}}}},yt=function(){var t=(0,p.E)(),n=!!t;(0,r.useEffect)((function(){if(n){var e=null==t?void 0:t.getMetricId(),r=e?(0,o.KJ)(e):null;(0,s.H)("nested_pwt_surface",{action:r})}}),[n])};function gt(t){var n,e=t.children,r=X(t,q),i=(0,l.fM)(),a=ft(i),o=tt(null!==(n=r.annotateExperiments)&&void 0!==n?n:[]),c=rt(rt({},r),{},{annotateExperiments:o,navigationInfo:{navigationType:a,clientNavigation:i}}),s=mt(c).context;return yt(),(0,Y.jsx)(p.S,{value:s,children:e})}},768337:function(t,n){n.Z=function(t){switch(t){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";case"CA":return"CA";case"GB":return"GB";case"FR":return"FR";case"DE":return"DE";default:return"OTHER"}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/24321-fec3237d1b50ff1c.js.map